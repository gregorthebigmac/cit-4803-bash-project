#!/bin/bash

source $root_dir/system_files/bin/sys_bin/error_report.sh

# text formatting stuff
red=`tput setaf 1`
blue=`tput setaf 4`
green=`tput setaf 2`
cyan=`tput setaf 6`
reset=`tput sgr0`
bold=`tput bold`
# end of text formatting stuff

shell_dir="$(cat "$root_dir/system_files/bin/sys_bin/.current_dir")"
export current_dir="$root_dir/file_system/"
user_command=""

echo "Successfully logged in as $username. Welcome back."
echo ""
echo "For a list of commands, type \"help\""

while [[ "$user_command" != "exit" ]]; do
	shell_dir="$(cat "$root_dir/system_files/bin/sys_bin/.current_dir")"
	echo -n "${bold}${green}$username${reset}${bold}@${blue}$(hostname)${reset}:${cyan}${bold} $shell_dir$ ${reset}"
	read user_command
	if [[ "$user_command" != "exit" ]]; then
		for cmd in $user_command; do
			if [[ "$cmd" == "cd" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "chgpass" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "del" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "delusr" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "edit" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "mkfile" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "mkusr" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "move" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "search" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "errors" ]]; then
				./system_files/bin/$user_command
				break
			elif [[ "$cmd" == "help" ]]; then
				echo "The following commands may be used from the terminal at any point in time."
				echo "For specific help on the usage of any of these commands, type: [command] -h"
				echo ""
				cat $root_dir/system_files/config/commands
			else echo "$user_command: Not found! For a list of commands, type \"help\""
				break
			fi
		done
	fi
done
